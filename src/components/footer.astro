---
import { Container } from './container';
---

<footer class="footer">
  <Container>
    <p>
      <span data-lang="en">Created by</span>
      <span data-lang="zh">由</span>
      {' '}
      <a href="https://twitter.com/remvze">
        <span data-lang="en">Maze ✦</span>
        <span data-lang="zh">Maze ✦ 创建</span>
      </a>
    </p>
  </Container>
</footer>

<script>
  // Language switching logic
  function getCurrentLanguage() {
    if (typeof window !== 'undefined' && window.localStorage) {
      try {
        return localStorage.getItem('moodist-language') || 'en';
      } catch {
        return 'en';
      }
    }
    return 'en';
  }

  function updateLanguageDisplay(lang) {
    const elements = document.querySelectorAll(`[data-lang="${lang}"]`);
    elements.forEach(el => {
      if (el instanceof HTMLElement) {
        el.style.display = 'block';
      }
    });
    
    const otherElements = document.querySelectorAll(`[data-lang="${lang === 'en' ? 'zh' : 'en'}"]`);
    otherElements.forEach(el => {
      if (el instanceof HTMLElement) {
        el.style.display = 'none';
      }
    });
  }
  
  // Initialize with current language
  document.addEventListener('DOMContentLoaded', () => {
    const currentLang = getCurrentLanguage();
    updateLanguageDisplay(currentLang);
    
    // Listen for language changes from other components
    window.addEventListener('languageChanged', (event) => {
      updateLanguageDisplay(event.detail.language);
    });
  });
</script>

<style>
  .footer {
    display: flex;
    align-items: center;
    height: 100px;

    & p {
      font-size: var(--font-sm);
      color: var(--color-foreground-subtle);
      text-align: center;

      & a {
        font-weight: 500;
        color: var(--color-foreground);
        text-decoration: none;
      }
    }
  }
</style>
